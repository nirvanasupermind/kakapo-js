"use strict";Array.prototype.flat||(Array.prototype.flat=function(t,r){return r=this.concat.apply([],this),1<t&&r.some(Array.isArray)?r.flat(t-1):r},Array.prototype.flatMap=function(t,r){return this.map(t,r).flat()});var kakapo=new function(){function t(t){this._=t}function o(n){return n=String(n),new t(function(t){if(t===n)return u(n,0,n.length);for(var r=0;t.charAt(r)===n.charAt(r)&&r<Math.max(t.length,n.length);)r++;return a(r)})}t.prototype.parse=function(t){return t=String(t),void 0!==this._(t).value?this._(t).value:this._(t)},t.prototype.or=function(r){var n=this;return new t(function(t){return(f(n._(t))?r:n)._(t)})},t.prototype.then=function(o){var i=this;return new t(function(t){for(var r=0;r<t.length&&f(o._(t.substring(r)));)r++;var n=i._(t.substring(0,r)),e=o._(t.substring(r));return f(n)?n:f(e)?a(e.index+r):u([n.value,e.value],n.start,e.end+r)})},t.prototype.quantified=function(t,r){for(var n=i(this,t),e=t+1;e<=r;e++)n=n.or(i(this,e));return n},t.prototype.repeat=function(t){return this.quantified(t,t)},t.prototype.opt=function(t){return o("").or(this)},t.prototype.zeroOrMore=function(){return this.quantified(0,r).quantified(0,r).transform(t=>t.flat(1))},t.prototype.oneOrMore=function(){return this.then(this.zeroOrMore()).transform(t=>t[0].concat(t[1]))},t.prototype.transform=function(r){var n=this;return new t(function(t){t=n._(t);return f(t)?t:u(r(t.value),t.start,t.end)})};const r=11;function u(t,r,n){return{value:t,start:parseFloat(r),end:parseFloat(n)}}function a(t){return{error:{index:parseFloat(t)}}}function f(t){return t&&t.error}function i(t,r){if(0===r)return o("").transform(()=>[]);if(1===r)return t.transform(t=>[t]);for(var n=t.then(t),e=2;e<r;e++)n=n.then(t).transform(t=>[...t[0],...t.slice(1)]);return n}this.Parser=t,this.text=o,this.char=function(t){for(var r=o((t=""+t).charAt(0)),n=1;n<t.length;n++)r=r.or(o(t.charAt(n)));return r},this.success=u,this.failure=a};"object"==typeof module&&module.exports?module.exports=kakapo:"function"==typeof define&&define([],function(){return kakapo});