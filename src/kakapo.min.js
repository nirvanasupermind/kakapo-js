"use strict";var kakapo=new function(){function u(r,t){for(var n=0;n<t.length&&f(r._(t.slice(0,n)));)n++;return n}function f(r){return r&&"object"==typeof r&&r.error}function a(r){return{error:{index:Number.parseFloat(r)}}}function f(r){return r&&r.error}function o(r,t){if(0===t)return i("").transform(()=>[]);for(var n=r,e=0;e<t-1;e++)n=n.then(r);return n.transform(r=>Array.isArray(r)?[].concat.apply([],r):[r])}function r(r){this._=r}function i(e){return e=""+e,new r(function(n){if(n===e)return e;var r=n.split("").filter((r,t)=>n.charAt(t)!==e.charAt(t));return a(r=n.indexOf(r[0]))})}function t(r){for(var t=i((r=""+r).charAt(0)),n=1;n<r.length;n++)t=t.or(i(r.charAt(n)));return t}r.prototype.parse=function(r){return this._(r=""+r)},r.prototype.transform=function(t){var n=this;return new r(function(r){r=n._(r);return f(r)?r:t(r)})},r.prototype.or=function(n){var e=this;return new r(function(r){var t=e._(r),r=n._(r);return f(t)?f(r)?a(Math.max(t.error.index,r.error.index)):r:t})},r.prototype.not=function(){var n=this;return new r(function(r){var t=n._(r);return f(t)?r:a(u(n,r)-1)})},r.prototype.then=function(o){var i=this;return new r(function(r){var t=function(r,t){for(var n=t.length-1;0<=n&&f(r._(t.slice(0,n)));)n--;return++n}(i,r)-1,n=r.slice(0,t),e=i.parse(n);if(f(e))return a(u(i,r)-1);n=u(i,r.slice(0,t)),n=o.parse(r.slice(n));return f(n)?{error:{index:n.error.index+t}}:[e,n]})},r.prototype.quantified=function(r,t=r){for(var n=o(this,r),e=r+1;e<=t;e++)n=n.or(o(this,e));return n},r.prototype.zeroOrMore=function(r=1500){return this.quantified(0,r)},r.prototype.oneOrMore=function(){return this.quantified(1,1501)};var n=t("123456789").then(t("0123456789").zeroOrMore()).transform(r=>[r[0],r[1].join("")].join("")).or(i("0")),e=t("-+").then(n).transform(r=>r.join("")).or(n);this.Parser=r,this.failure=a,this.text=i,this.char=t,this.uint=n,this.int=e};"object"==typeof module&&module.exports?module.exports=kakapo:"function"==typeof define&&define([],function(){return kakapo});